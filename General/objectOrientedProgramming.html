<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="description" content="A collection of notes describing a few aspects of R for bioinformatics.">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link rel="stylesheet" href="../stylesheets/stylesheet.css" media="screen"/>
  <link rel="stylesheet" href="../stylesheets/pygment_trac.css"/>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="../javascripts/script.js"></script>
  <title>Object-Oriented programming in R</title>
</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">R Notes for Bioinformatics</h1>
    </header>
    <div id="container">
      <p class="tagline">A collection of notes describing a few aspects of R for bioinformatics.</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/chernan/RNotes4Bioinformatics/tarball/gh-pages" class="download-button tar"><span>Download</span></a>
          <a href="https://github.com/chernan/RNotes4Bioinformatics/zipball/gh-pages" class="download-button zip"><span>Download</span></a>
          <a href="https://github.com/chernan/RNotes4Bioinformatics" class="code">View R Notes for Bioinformatics on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
        
<h1>Object-Oriented programming in R</h1>

<h2>Definitions</h2>

<p>We use it without knowing it, nor worrying about it.
A bit of vocab : object, class, attribute, method, inheritance, polymorphism.</p>

<p>Two frameworks: S3 (&ldquo;old-style&rdquo;, widely used in base packages) and S4 (&ldquo;formal classes&rdquo;, since R 1.7, widely used in Bioconductor).</p>

<h2>S3 framework</h2>

<p>Class is a label attached to an object. Every object in R has a class (&ldquo;numeric&rdquo;, &ldquo;matrix&rdquo;, &ldquo;lm&rdquo;, &ldquo;factor&rdquo;&hellip;).</p>

<h3>Method dispatch</h3>

<p>Example of the summary() function. Applied on different objects gives different outputs. Many summary.&ldquo;classname&rdquo;() defined, for each class.</p>

<pre><code class="r">summary
</code></pre>

<pre><code>## function (object, ...) 
## UseMethod(&quot;summary&quot;)
## &lt;bytecode: 0xb65ebf74&gt;
## &lt;environment: namespace:base&gt;
</code></pre>

<pre><code class="r">methods(&quot;summary&quot;)
</code></pre>

<pre><code>##  [1] summary.aov             summary.aovlist        
##  [3] summary.aspell*         summary.connection     
##  [5] summary.data.frame      summary.Date           
##  [7] summary.default         summary.ecdf*          
##  [9] summary.factor          summary.ggplot*        
## [11] summary.glm             summary.infl           
## [13] summary.lm              summary.loess*         
## [15] summary.loglm*          summary.manova         
## [17] summary.matrix          summary.mlm            
## [19] summary.negbin*         summary.nls*           
## [21] summary.packageStatus*  summary.PDF_Dictionary*
## [23] summary.PDF_Stream*     summary.polr*          
## [25] summary.POSIXct         summary.POSIXlt        
## [27] summary.ppr*            summary.prcomp*        
## [29] summary.princomp*       summary.rlm*           
## [31] summary.srcfile         summary.srcref         
## [33] summary.stepfun         summary.stl*           
## [35] summary.table           summary.tukeysmooth*   
## 
##    Non-visible functions are asterisked
</code></pre>

<p>Non-visible functions can be accessed by getAnywhere(&ldquo;functionname&rdquo;)</p>

<pre><code class="r">summary.loess()
</code></pre>

<pre><code>## Error: impossible de trouver la fonction &quot;summary.loess&quot;
</code></pre>

<pre><code class="r">getAnywhere(summary.loess)
</code></pre>

<pre><code>## A single object matching &#39;summary.loess&#39; was found
## It was found in the following places
##   registered S3 method for summary from namespace stats
##   namespace:stats
## with value
## 
## function (object, ...) 
## {
##     class(object) &lt;- &quot;summary.loess&quot;
##     object
## }
## &lt;bytecode: 0xb96f0f4&gt;
## &lt;environment: namespace:stats&gt;
</code></pre>

<p>Access all methods of a class.</p>

<pre><code class="r">methods(class = &quot;lm&quot;)
</code></pre>

<pre><code>##  [1] add1.lm*           alias.lm*          anova.lm          
##  [4] case.names.lm*     confint.lm*        cooks.distance.lm*
##  [7] deviance.lm*       dfbeta.lm*         dfbetas.lm*       
## [10] drop1.lm*          dummy.coef.lm*     effects.lm*       
## [13] extractAIC.lm*     family.lm*         formula.lm*       
## [16] fortify.lm*        hatvalues.lm       influence.lm*     
## [19] kappa.lm           labels.lm*         logLik.lm*        
## [22] model.frame.lm     model.matrix.lm    nobs.lm*          
## [25] plot.lm            predict.lm         print.lm          
## [28] proj.lm*           qr.lm*             residuals.lm      
## [31] rstandard.lm       rstudent.lm        simulate.lm*      
## [34] summary.lm         variable.names.lm* vcov.lm*          
## 
##    Non-visible functions are asterisked
</code></pre>

<h3>Creating an S3 object</h3>

<p>Example of the mygsea2 package.</p>

<pre><code class="r"># Create a list
z &lt;- list()
# Label it with the correct class
class(z) &lt;- &quot;gsea&quot;
# Create the methods the user of the class/object will need
print.gsea &lt;- function(object) {
}
# If needed, create a new generic method
reduce.gsea &lt;- function(object) {
}
reduce &lt;- function(object) UseMethod(&quot;reduce&quot;)
</code></pre>

<p>The user can easily access the attributes directly, modify it&hellip; and R will not complain!</p>

<h2>S4 framework</h2>

<p>Based on the same &ldquo;method dispatch&rdquo; idea than S3, but more formal.</p>

<pre><code class="r">setClass(&quot;GSEA&quot;, representation(nperms = &quot;numeric&quot;), contains = &quot;genelist&quot;, 
    validity = function(object) {

    })
</code></pre>

<pre><code>## Error: No definition was found for superclass &quot;genelist&quot; in the
## specification of class &quot;GSEA&quot;
</code></pre>

<pre><code class="r">gsea &lt;- new(&quot;GSEA&quot;, nperms = 1000)
</code></pre>

<pre><code>## Error: &quot;GSEA&quot; is not a defined class
</code></pre>

<p>Checks are made for the validity of any created object. Properties include a name, representation, inheritance, prototype, validation(), etc. Attributes are stored in slots, similar to the components of a list for a S3 object, but use @ to &ldquo;enter&rdquo; the attributes of an object. S3 use print(), S4 use show(). &ldquo;ANY&rdquo; is the basic inheritance.</p>

<p>One can choose whichever one wants, but in any case, avoid mixing S3 and S4.</p>

<h3>How to access information in an unknown object?</h3>

<p>class(object)
look at documentation
find if S3 or S4 names(object) or isS4(object)
look at the methods available for the object
methods(class=&ldquo;class&rdquo;) or showMethods(class=&ldquo;class&rdquo;)
look at the attributes using $ or @
if needed look at a method to see how it handles the attributes (method.class or getMethods(&ldquo;method&rdquo;, &ldquo;class&rdquo;) )</p>

<h2>R5 framework</h2>

<p>Still under development&hellip; See ?ReferenceClasses and <a href="http://github.com/hadley/devtools/wiki/R5">http://github.com/hadley/devtools/wiki/R5</a></p>

<p><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a><br />This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Celine Hernandez</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p>

        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/chernan" class="avatar"><img src="https://0.gravatar.com/avatar/87ffdd8b5458b07e667a4e23a636b8dd?d=https%3A%2F%2Fidenticons.github.com%2F52da2d5c8b30ddc47bfbd75cd46d8a65.png&amp;s=30" width="48" height="48"/></a> <a href="https://github.com/chernan">chernan</a> maintains <a href="https://github.com/chernan/RNotes4Bioinformatics">R Notes for Bioinformatics</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br/>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/chernan/RNotes4Bioinformatics/tarball/master" class="tar">tar</a><a href="https://github.com/chernan/RNotes4Bioinformatics/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>


</html>
